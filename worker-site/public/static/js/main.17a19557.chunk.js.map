{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","webcamRef","React","useRef","playbackRef","mediaRecorderRef","wellermanRef","lyricsRef","useState","loaded","setLoaded","capturing","setCapturing","playing","setPlaying","recordedChunks","setRecordedChunks","showKaraoke","setShowKaraoke","handleDataAvailable","useCallback","data","size","prev","concat","handleStartCaptureClick","current","pause","removeAttribute","load","currentTime","play","scrollIntoView","MediaRecorder","stream","audioBitsPerSecond","videoBitsPerSecond","mimeType","e0","alert","addEventListener","start","handleStopCaptureClick","stop","handlePlay","length","blob","Blob","type","src","window","URL","createObjectURL","handleStop","handleDownload","url","a","document","createElement","body","appendChild","style","href","download","click","revokeObjectURL","handleLoaded","RabbitLyrics","className","display","alt","onClick","height","ref","videoConstraints","width","frameRate","min","ideal","max","facingMode","onUserMediaError","console","log","autoPlay","loop","playsInline","fontSize","onLoadedData","onEnded","dangerouslySetInnerHTML","__html","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.17a19557.chunk.js","sourcesContent":["import './App.css'\nimport React from 'react';\nimport Webcam from 'react-webcam';\nimport RabbitLyrics from 'rabbit-lyrics';\n\nconst App = () => {\n  const webcamRef = React.useRef(null);\n  const playbackRef = React.useRef(null);\n  const mediaRecorderRef = React.useRef(null);\n  const wellermanRef = React.useRef(null);\n  const lyricsRef = React.useRef(null);\n  const [loaded, setLoaded] = React.useState(false);\n  const [capturing, setCapturing] = React.useState(false);\n  const [playing, setPlaying] = React.useState(false);\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\n  const [showKaraoke, setShowKaraoke] = React.useState(false);\n\n  const videoConstraints = {\n    height: 720,\n    width: 1280,\n    frameRate: { min: 24, ideal: 30, max: 60 },\n    facingMode: \"user\"\n  }\n\n  const handleDataAvailable = React.useCallback(\n    ({ data }) => {\n      if (data.size > 0) {\n        setRecordedChunks((prev) => prev.concat(data));\n      }\n    },\n    [setRecordedChunks]\n  );\n\n  const handleStartCaptureClick = React.useCallback(() => {\n    setCapturing(true);\n    setPlaying(false);\n    setRecordedChunks([]);\n    playbackRef.current.pause()\n    playbackRef.current.removeAttribute('src')\n    playbackRef.current.load()\n    wellermanRef.current.currentTime = 0\n    wellermanRef.current.play();\n    wellermanRef.current.scrollIntoView()\n    var options = {\n      audioBitsPerSecond : 128000,\n      videoBitsPerSecond : 2500000,\n      mimeType: 'video/webm; codecs=vp8,opus'\n    }\n    try {\n      mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, options);\n    } catch (e0) {\n      alert('MediaRecorder is not supported by this browser. Please use Firefox.');\n      return;\n    }\n    \n    mediaRecorderRef.current.addEventListener(\n      \"dataavailable\",\n      handleDataAvailable\n    );\n    mediaRecorderRef.current.start();\n  }, [webcamRef, setCapturing, mediaRecorderRef, handleDataAvailable]);\n\n  const handleStopCaptureClick = React.useCallback(() => {\n    mediaRecorderRef.current.stop();\n    wellermanRef.current.pause();\n    setCapturing(false);\n  }, [mediaRecorderRef, setCapturing]);\n\n  const handlePlay = React.useCallback(() => {\n    if (recordedChunks.length) {\n      const blob = new Blob(recordedChunks, {\n        type: \"video/webm\"\n      });\n      playbackRef.current.src = window.URL.createObjectURL(blob);\n      setPlaying(true)\n      wellermanRef.current.currentTime = 0\n      wellermanRef.current.play();\n    }\n  }, [playbackRef, wellermanRef, recordedChunks, setPlaying]);\n\n  const handleStop = React.useCallback(() => {\n    setPlaying(false)\n    playbackRef.current.pause()\n    playbackRef.current.currentTime = 0\n    wellermanRef.current.currentTime = 0\n    wellermanRef.current.pause();\n  }, [playbackRef, wellermanRef, setPlaying]); \n\n  const handleDownload = React.useCallback(() => {\n    if (recordedChunks.length) {\n      const blob = new Blob(recordedChunks, {\n        type: \"video/webm\"\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      document.body.appendChild(a);\n      a.style = \"display: none\";\n      a.href = url;\n      a.download = \"shanty.webm\";\n      a.click();\n      window.URL.revokeObjectURL(url);\n      setRecordedChunks([]);\n    }\n  }, [recordedChunks]);\n\n\n  const handleLoaded = React.useCallback(() => {\n    setLoaded(true)\n    new RabbitLyrics(\n      lyricsRef.current,\n      wellermanRef.current\n  )\n  }, [setLoaded, wellermanRef, lyricsRef])\n\n  const lyrics = `[00:02.00] There once was a ship that put to sea\n  [00:05.00] The name of the ship was the Billy of Tea \n  [00:08.00] The winds blew up, her bow dipped down \n  [00:10.00] Oh blow, my bully boys, blow (huh) \n\n  [00:13.00] Soon may the Wellerman come\n  [00:15.00] To bring us sugar and tea and rum\n  [00:18.00] One day, when the tonguing is done\n  [00:20.00] We'll take our leave and go\n  \n  [00:23.00] She'd not been two weeks from shore\n  [00:25.00] When down on her a right whale bore\n  [00:28.00] The captain called all hands and swore\n  [00:30.00] He'd take that whale in tow (huh)\n  \n  [00:33.00] Soon may the Wellerman come\n  [00:35.00] To bring us sugar and tea and rum\n  [00:38.00] One day, when the tonguing is done\n  [00:40.00] We'll take our leave and go\n  \n  [00:43.00] Da-da-da-da-da\n  [00:45.00] Da-da-da-da-da-da-da\n  [00:48.00] Da-da-da-da-da-da-da-da-da-da-da\n  \n  [00:53.00] Before the boat had hit the water\n  [00:55.00] The whale's tail came up and caught her\n  [00:58.00] All hands to the side, harpooned and fought her\n  [01:00.00] When she dived down low (huh)â€¦\n  \n  [01:03.00] Soon may the Wellerman come\n  [01:05.50] To bring us sugar and tea and rum\n  [01:08.00] One day, when the tonguing is done\n  [01:10.00] We'll take our leave and go\n  \n  [01:12.00] No line was cut, no whale was freed\n  [01:15.00] The captain's mind was not of greed\n  [01:18.00] And he belonged to the Whaleman's creed\n  [01:20.00] She took that ship in tow (huh)\n\n  [01:23.00] Soon may the Wellerman come\n  [01:25.00] To bring us sugar and tea and rum\n  [01:28.00] One day, when the tonguing is done\n  [01:30.00] We'll take our leave and go\n\n  [01:33.00] Da-da-da-da-da\n  [01:35.00] Da-da-da-da-da-da-da\n  [01:38.00] Da-da-da-da-da-da-da-da-da-da-da\n\n  [01:42.00] For forty days or even more\n  [01:45.00] The line went slack then tight once more\n  [01:48.00] All boats were lost, there were only four\n  [01:50.00] But still that whale did go (huh)\n\n  [01:53.00] Soon may the Wellerman come\n  [01:55.00] To bring us sugar and tea and rum\n  [01:58.00] One day, when the tonguing is done\n  [02:00.00] We'll take our leave and go\n\n  [02:03.00] As far as I've heard, the fight's still on\n  [02:06.00] The line's not cut, and the whale's not gone\n  [02:07.00] The Wellerman makes his regular call\n  [02:10.00] To encourage the captain, crew and all (huh)\n\n  [02:13.00] Soon may the Wellerman come\n  [02:15.00] To bring us sugar and tea and rum\n  [02:18.00] One day, when the tonguing is done\n  [02:20.00] We'll take our leave and go\n\n  [02:23.00] Soon may the Wellerman come\n  [02:25.00] To bring us sugar and tea and rum\n  [02:28.00] One day, when the tonguing is done\n  [02:30.00] We'll take our leave and go  \n  `\n\n  const handleError = () => {\n    console.log('error')\n    alert('MediaRecorder is not supported by this browser. Please use Firefox.');\n  }\n\n  return (\n    <div className=\"App\">\n      <br />\n      <div style={{display: showKaraoke ? 'none' : 'block' }} >\n        <img \n          className=\"pirate-flag\"\n          src=\"./flag.png\" \n          alt=\"Pirate Flag\" />\n        <p>\n          Ah this here reminds me o' the time when I be sailin' in the 'igh seas <br />\n          with me fellow arr, mates, singin' our 'earts out until the sun goes down <br />\n          after a day o' 'onest labour.<br />\n        </p>\n        <p>\n          It be the only way to go I tell ye'all. So quit ya blabberin' an' begin doin'.\n        </p>\n        <br />\n        <button onClick={setShowKaraoke}>Aye aye Cap'n</button>\n      </div>\n      <div style={{display: showKaraoke ? 'block' : 'none' }} >\n        <Webcam \n          height={720}\n          ref={webcamRef} \n          videoConstraints={videoConstraints} \n          onUserMediaError={handleError}\n          />\n        <video \n          height={720}\n          ref={playbackRef} \n          autoPlay loop playsInline />\n        <br />\n        <font style={{fontSize: 'x-small'}}>Note: Use Firefox if you don't see anything</font>\n        <br />\n        <br />\n        {loaded ? (\n          <>\n            {capturing ? (\n              <button onClick={handleStopCaptureClick}>Avast ye Capturin</button>\n            ) : (\n              <button onClick={handleStartCaptureClick}>Argg Let's Start ye Singin</button>\n            )}\n          </>\n        ) : (\n          <button>Loading ...</button>\n        )}\n        {recordedChunks.length > 0 && (<>\n          {playing ? (\n            <button onClick={handleStop}>Avast</button>\n          ) : (\n            <button onClick={handlePlay}>Play</button>\n          )}\n          <button onClick={handleDownload}>Download</button>\n          </>\n        )}\n        <hr />\n        <div className=\"wellerman\">\n          <font style={{fontSize: 'x-small'}}>Note: On mobile, click the video below to start.</font><br />\n          <video \n            ref={wellermanRef} \n            width=\"300\" \n            src=\"./wellerman.mp4\" \n            playsInline \n            onLoadedData={handleLoaded}\n            onEnded={handleStopCaptureClick}\n            /> \n          <br />\n          Credits:<br /> Nathan Evans - Wellerman\n        </div>\n        <div className=\"rabbit-lyrics\" ref={lyricsRef} style={{display: loaded ? 'inline-block' : 'none' }} dangerouslySetInnerHTML={{ __html: lyrics }}>\n        </div>\n      </div> \n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}